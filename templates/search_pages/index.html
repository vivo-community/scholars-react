<!-- FIXME: better way to override these -->
<style>
  #main {
    width: 100%;
    margin: 140px auto 0 auto;
  }
  main {
    margin-top: 0.75em;
  }

  .search-container {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    width: 100%;
    margin: 0 auto;
    grid-auto-flow: dense;
    grid-column-gap: .5em;
  }
  .search-container aside {
    grid-column: span 2;
    padding: 0.25em;
  }
  .search-container main {
    grid-column: span 10;
    padding: 0.25em;
  }
  .search-container main {
    padding-right: 10%;
  }
  aside {
    padding: 0;
    background-color: var(--highlightBackgroundColor);
  }
  .search-container aside {
    padding: 0;
  }
  vivo-sidebar {
    margin: 0;
  }
  vivo-search-sidebar-item {
    padding-bottom: 0px;
  }
  vivo-modal {
    text-align: center;
  }

  
  @media screen and (max-width: 800px) {
    #main {
      width: 100%
    }
    .search-container {
      display: grid;
      grid-template-columns: 1fr;
      grid-column-gap: 0;
      grid-template-rows: auto;
    }
    .search-container main {
      padding: 0;
    }
    .search-container aside {
      padding: 0;
      margin-top: 1.25em;
    }
  }
   
</style>
<vivo-search-navigation></vivo-search-navigation>

<vivo-modal id="search-waiting">
  <h3>Searching...</h3>
  <vivo-search-spinner></vivo-search-spinner>
</vivo-modal>

<div class="search-container">
  <!-- NOTE: facets and search are in separate sections
    the vivo-search-navigation elements uses the "search" attribute
    to figure out which search to attach to (by corresponding id)
  -->
  <aside>
     <vivo-sidebar>

       <vivo-search-sidebar-item>
          <vivo-facet-group slot="content" key="people" search="person-search">
            <h3>Filter People</h3>
            <vivo-search-facets key="people" field="schools" tag="schools">
              <h4>School/Unit</h4>
            </vivo-search-facets>

            <vivo-search-facets key="people" field="organizations" tag="organizations">
              <h4>Department</h4>
            </vivo-search-facets>
            
            <vivo-search-facets key="people" field="type" tag="type">
              <h4>Position</h4>
            </vivo-search-facets>

          </vivo-facet-group>

        </vivo-search-sidebar-item>

        <vivo-search-sidebar-item>
          <vivo-facet-group slot="content" key="documents" search="publication-search">
            <h3>Filter Publications</h3>
            <!-- TODO: maybe use 'key' from parent facet-group tag -->
            <vivo-search-facets key="documents" field="type" tag="type">
              <h4>Type</h4>
            </vivo-search-facets>

            <vivo-publication-date-facets key="documents" field="publicationDate"
              implements="vivo-search-facets" tag="publicationDate">
              <h4>Date</h4>
            </vivo-publication-date-facets>

            <!-- NOTE: author name seemed to need 'RAW' option -->
            <vivo-search-facets key="documents" field="authors" tag="authors">
              <h4>Author</h4>
            </vivo-search-facets>

            <vivo-search-facets key="documents" field="publisher" tag="publisher">
              <h4>Publisher</h4>
            </vivo-search-facets>

          </vivo-facet-group>
        </vivo-search-sidebar-item>

        <vivo-search-sidebar-item>
          <vivo-facet-group slot="content" key="relationships" search="grant-search">
            <h3>Filter Funding</h3>
            <!-- TODO: maybe use 'key' from parent facet-group tag -->
            <vivo-search-facets key="relationships" field="contributors" tag="contributors">
              <h4>Contributors</h4>
            </vivo-search-facets>

            <vivo-search-facets key="relationships" field="awardedBy" tag="awardedBy">
              <h4>Funding Source</h4>
            </vivo-search-facets>

          </vivo-facet-group>
        </vivo-search-sidebar-item>

    </vivo-sidebar>
  </aside>

  <main>
 
    <vivo-filter-clearer></vivo-filter-clearer>

    <vivo-tabs id="secondary-example" vivo-tab-style="secondary">
      <vivo-tab id="person-search-tab">
        People (<span id="person-search-count">0</span>)
      </vivo-tab>

      <vivo-tab-panel >
        <!-- NOTE: the vivo-search-navigation element uses the id of the
          tab ("person-search-tab") and lops off the "-tab" to figure
          out the active search id - if it could detect a <vivo-search>
          child element interface that might be better
        -->
        <vivo-person-search id="person-search" implements="vivo-search"/>
      </vivo-tab-panel>

      <vivo-tab id="publication-search-tab">
        Publications (<span id="publication-search-count">0</span>)
      </vivo-tab>

      <vivo-tab-panel>
          <vivo-publication-search id="publication-search" implements="vivo-search"/>
      </vivo-tab-panel>

      <vivo-tab id="grant-search-tab">
        Funding (<span id="grant-search-count">0</span>)
      </vivo-tab>

      <vivo-tab-panel>
          <vivo-grant-search id="grant-search" implements="vivo-search"/>
      </vivo-tab-panel>

    </vivo-tabs>

  </main>
</div>

<%= javascriptTag("search.js") %>
