<?xml version="1.0" encoding="UTF-8"?>
<%
 let totalItems = data["documents"]["page"]["totalElements"]
 let totalPages = FloatToInt(data["documents"]["page"]["totalPages"])
 let currentPage = FloatToInt(data["documents"]["page"]["number"])
 let results = data["documents"]["content"]

 let paging = FigurePagingInfo(currentPage, totalPages)
%>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <!-- NOTE: list pages could also do this e.g.  
    <url>
      <loc><%= siteUrl %>/lists/publications</loc>
    </url>
   -->
   <%= for (document) in data["documents"]["content"] { %>
   <url>
      <loc><%= siteUrl %>/entity_pages/publications/<%= document["id"] %></loc>
   </url>
   <% } %>

   <%= if ((currentPage + 1) < totalPages) { %>
   <url>
      <loc><%= siteUrl %>/sitemaps/publications.xml?pageNumber=<%= currentPage + 1 %></loc>
   </url>
   <% } %>

</urlset> 